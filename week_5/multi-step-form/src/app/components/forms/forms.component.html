<div id="form-wrapper">
  <h1>{{ getHeadings(currentStep).title }}</h1>
  <p>{{ getHeadings(currentStep).description }}</p>
  <!-- Form -->
  <form id="form-container" [formGroup]="formFields" (ngSubmit)="submitForm()">
    <!-- form input -->
    <ng-container *ngIf="currentStep === 1">
      <div class="form-group">
        <label for="name">
          <span>Name</span>
          <span class="error-message" *ngIf="formFields.hasError('required')"
            >This field is required</span
          >
        </label>
        <input
          type="text"
          id="name"
          class="form-input"
          placeholder="e.g Stephen King"
          formControlName="name"
          [ngStyle]="{
            borderColor: formFields.hasError('required') ? 'var(--error)' : ''
          }"
        />
      </div>
      <div class="form-group">
        <label for="email">
          <span>Email</span>
          <span class="error-message" *ngIf="formFields.hasError('required')"
            >This field is required</span
          >
        </label>
        <input
          type="email"
          id="email"
          class="form-input"
          placeholder="e.g stephenking@lorem.com"
          formControlName="email"
          [ngStyle]="{
            borderColor: formFields.hasError('required') ? 'var(--error)' : ''
          }"
        />
      </div>
      <div class="form-group">
        <label for="phone-number">
          <span>Phone Number</span>
          <span class="error-message" *ngIf="formFields.hasError('required')"
            >This field is required</span
          >
        </label>
        <input
          type="text"
          id="phone-number"
          class="form-input"
          placeholder="e.g +1 234 567 890"
          formControlName="phone"
          [ngStyle]="{
            borderColor: formFields.hasError('required') ? 'var(--error)' : ''
          }"
        />
      </div>
    </ng-container>

    <ng-container *ngIf="currentStep === 2">
      <div class="form-group">
        <div class="card-container">
          <div class="card" *ngFor="let plan of plans">
            <img [src]="plan.icon" [alt]="plan.type" />
            <div class="card-texts">
              <h3>{{ plan.type | titlecase }}</h3>
              <p>{{ plan.price }}</p>
            </div>
          </div>
        </div>
        <!-- banner with switch and labels for monthly and yearly -->
        <div class="banner">
          <span class="switch-container">
            <small class="monthly-plan" [ngClass]="{ active: !isYearly }"
              >Monthly</small
            >
            <input
              type="checkbox"
              id="toggle-switch"
              class="switch-checkbox"
              (change)="togglePlan($event)"
              id="toggle-switch"
            />
            <label for="toggle-switch" class="switch-label">
              <span class="switch-inner"></span>
              <span class="switch-slider"></span>
            </label>
            <small class="yearly-plan" [ngClass]="{ active: isYearly }"
              >Yearly</small
            >
          </span>
        </div>
      </div>
    </ng-container>

    <ng-container *ngIf="currentStep === 3">
      <div class="form-group">
        <div class="addon-container">
          <div class="addon-card" *ngFor="let addon of addons">
            <label [for]="addon.title">
              <input
                [id]="addon.title"
                type="checkbox"
                [value]="addon.id"
                class="addon-checkbox"
              />
              <div class="addon-content">
                <div class="addon-text">
                  <h3>{{ addon.title }}</h3>
                  <p>{{ addon.description }}</p>
                </div>
                <span class="addon-price">+{{ addon.price }}/mo</span>
              </div>
            </label>
          </div>
        </div>
      </div>
    </ng-container>

    <ng-container *ngIf="currentStep === 4">
      <div class="form-group">
        <div class="summary-card">
          <div class="plan-details">
            <div class="plan-header">
              <h3>Arcade (Monthly)</h3>
              <p><a href="#" class="change-link">Change</a></p>
            </div>
            <p class="plan-price">$9/mo</p>
          </div>
          <hr />
          <ul class="summary-addons">
            <li class="summary-addon">
              <span>Online service</span>
              <span>+$1/mo</span>
            </li>
            <li class="addon">
              <span>Larger storage</span>
              <span>+$2/mo</span>
            </li>
          </ul>
        </div>
        <div class="total">
          <span>Total (per month)</span>
          <span class="total-price">+$12/mo</span>
        </div>
      </div>
    </ng-container>
    <!-- form buttons container -->
    <div id="form-buttons">
      <button type="button" class="back-btn" (click)="gotoPreviousStep()">
        Go back
      </button>

      <button type="submit" class="submit-btn" (click)="gotoNextStep()">
        Next Step
      </button>
    </div>
  </form>
</div>
